# Next.js Integration

<p class="description">Learn how to use Material UI with the Next.js</p>

## App Router

Starting fresh on a new App Router-based project?

Jump right into the code with [this example: Material UI - Next.js App Router in TypeScript](https://github.com/mui/material-ui/tree/master/examples/material-ui-nextjs-ts).

### Intalling the dependencies

You should already have `@mui/material` and `next` installed. Then, install these dependencies:

<codeblock storageKey="package-manager">

```bash npm
npm install @mui/material-nextjs @emotion/cache
```

```bash yarn
yarn add @mui/material-nextjs @emotion/cache
```

```bash pnpm
pnpm add @mui/material-nextjs @emotion/cache
```

</codeblock>

### Configuring

Inside `app/layout.tsx`, import the `AppRouterCacheProvider` and wrap all of the elements under the `<body>`:

```diff
// app/layout.tsx
+ import { AppRouterCacheProvider } from '@mui/material-nextjs/appRouterV13';

export default function RootLayout(props) {
  const { children } = props;
  return (
    <html lang="en">
      <body>
+        <AppRouterCacheProvider>{children}</AppRouterCacheProvider>
      </body>
    </html>
  );
}
```

### Using other styling solutions

If you are using a styling solution other than Emotion to customize Material UI components, set `enableCssLayer` to the `options` prop:

```js
<AppRouterCacheProvider options={{ enableCssLayer: true }}>
```

The styles generated by Material UI will be wrapped in a CSS `@layer mui` rule, which gives them precedence over custom stylesâ€”for example if you are customizing Material UI with CSS modules, Tailwind CSS, or even plain CSS.

## Pages Router

### Intalling the dependencies

You should already have `@mui/material` and `next` installed. Then, install these dependencies:

<codeblock storageKey="package-manager">

```bash npm
npm install @mui/material-nextjs @emotion/cache @emotion/server
```

```bash yarn
yarn add @mui/material-nextjs @emotion/cache @emotion/server
```

```bash pnpm
pnpm add @mui/material-nextjs @emotion/cache @emotion/server
```

</codeblock>

### Configuring

Inside `pages/_document.tsx`, import the `documentGetInitialProps` and use it as the Document's getInitialProps:

```diff
+ import { documentGetInitialProps } from '@mui/material-nextjs/pagesRouterV13';

export default function MyDocument() {
  return <Html lang="en">...</Html>;
}

+ MyDocument.getInitialProps = documentGetInitialProps;
```

Then inside `pages/_app.tsx`, import the `AppCacheProvider` and wrap all of the elements:

```diff
+ import { AppCacheProvider } from '@mui/material-nextjs/pagesRouterV13';

export default function MyApp(props) {
  const { Component } = props;
  return (
+    <AppCacheProvider {...props}>
      <Head>
        ...
      </Head>
      ...
+    </AppCacheProvider>
  );
}
```
