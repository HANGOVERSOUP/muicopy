# CSS variables

<p class="description">An overview of supporting CSS variables in Material UI components.</p>

[CSS variables](https://www.w3.org/TR/css-variables-1/) is a modern cross-browser feature that lets author declare variables in CSS and reuse them in other properties. It opens many doors for MUI to fix issues and improve developer experience.

If you come across CSS variables the first time, you should check out [the basic](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) before reading our documentation.

## Introduction

CSS variables (sometimes referred to as custom properties or cascading variables) provide significant improvements in developer experience related to theming and customization.
With these variables, you can inject a theme into your app's stylesheet _at build time_ to apply the user's selected settings before the whole app is rendered.

<!-- Link to the blog post -->

## Advantages

- It lets you prevent the [dark-mode SSR flickering](https://github.com/mui/material-ui/issues/27651).
- You can create unlimited color schemes beyond `light` and `dark`.
- It offers a better debugging experience not only for developers but also designers in your team as well.
- The application mode of your website is automatically synced between tabs.
- Integrating with third parties are a lot easier because the theme tokens are available globally in CSS. For example, you can reuse the CSS variables generated by Material UI to style non-React library without extra javascript.
- Reduce the need of a nested theme when you want to apply dark styles to a specific part of your application.

<!-- Checkout the blog post to see the demo -->

## Trade-offs

For a server-side application, there are some trade-offs that are worth mentioning:

|                                                       | Compare to the default method | Reason                                                                                                       |
| ----------------------------------------------------- | ----------------------------- | ------------------------------------------------------------------------------------------------------------ |
| HTML size                                             | bigger                        | CSS variables are generated for both light and dark mode at built time.                                      |
| [First Contentful Paint (FCP) ](https://web.dev/fcp/) | larger                        | Since the HTML size is generally bigger, the time to download the HTML before showing the content is longer. |
| [Time to Interactive (TTI)](https://web.dev/tti/)     | Smaller (for dark mode)       | The stylesheet are not regenerated between light and dark mode, so it takes less time for javascript to run. |

:::warning
⚠️ The comparison described in the table are reliable for small application without much customization. However, it might not be true for large and complex application since there are a lot of factors that can impact the metrics.
:::

## Mental model

Adopting CSS variables require some mental model shift when it comes to theming and customization between user selected modes.

### Colors

The way to declare colors has changed from creating a palette with a specific mode to providing all [color schemes](/material-ui/experimental-api/css-variables/customization/#color-schemes) palette at once.

```js
// the new API
extendTheme({
  colorSchemes: {
    light: { // palette for light mode
      palette: {...}
    },
    dark: { // palette for dark mode
      palette: {...}
    }
  }
})
```

### Styling

The conventional way of theming Material UI components usually rely on javascript to switch the value when the mode changes:

```js
// the current way
import { createTheme } from '@mui/material/styles';

createTheme({
  components: {
    MuiButton: {
      styleOverrides: {
        root: ({ theme }) => ({
          // use javascript conditional expression
          color: theme.palette.mode === 'dark' ? '#fff' : theme.palette.primary.main,
        }),
      },
    },
  },
});
```

However, with CSS variables, the styling leans toward cascading and specificity by using the appropriate selector:

```js
// code is shorten from the above example
{
  color: theme.vars.palette.primary.main,
  // When mode becomes dark, the attribute selector is attached to the <html> by default.
  '[data-mui-color-scheme="dark"] &': {
    color: '#fff',
  }
}
```

This pattern lets your application achieves perfect dark mode, no flicker when refresh the page on dark mode, for your users.

## What's next

- To start a new project with CSS variables, check out the [basic usage](/material-ui/experimental-api/css-variables/usage/).
- For an existing Material UI project, check out the [migration to CSS variables guide](/material-ui/experimental-api/css-variables/migration/)
- For theming and common use cases, check out the [customization guide](/material-ui/experimental-api/css-variables/customization/).
